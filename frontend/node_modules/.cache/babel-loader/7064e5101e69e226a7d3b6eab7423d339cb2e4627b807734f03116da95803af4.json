{"ast":null,"code":"var _jsxFileName = \"/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ChangePassword.jsx\",\n  _s = $RefreshSig$();\nimport { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport \"../styles/changepassword.css\";\n\n/**\n * Komponente zum Ändern des Benutzerpassworts.\n *\n * <p>Diese React-Komponente bietet ein Formular zur Änderung des Passworts\n * des aktuell eingeloggten Benutzers. Sie sendet eine Anfrage an den\n * Spring-Boot-Endpunkt <code>/user/change-password</code> und verwendet dabei\n * das JWT-Cookie für die Authentifizierung.</p>\n *\n * <ul>\n *   <li>Validiert Eingaben lokal (z. B. Mindestlänge des neuen Passworts).</li>\n *   <li>Zeigt Fehlermeldungen direkt im Formular an.</li>\n *   <li>Leitet nach erfolgreicher Änderung zur Konto-Seite weiter.</li>\n * </ul>\n *\n * @component\n * @returns {JSX.Element} The password change form component.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChangePassword() {\n  _s();\n  const navigate = useNavigate();\n\n  /** Zustand: altes Passwort */\n  const [oldPassword, setOldPassword] = useState(\"\");\n  /** Zustand: neues Passwort */\n  const [newPassword, setNewPassword] = useState(\"\");\n  /** Zustand: Fehlermeldung */\n  const [error, setError] = useState(\"\");\n  /** Zustand: Loading-Indikator */\n  const [isLoading, setIsLoading] = useState(false);\n\n  /**\n   * Sendet die Passwortänderung an das Backend.\n   *\n   * @async\n   * @param {Event} e - Submit-Event des Formulars\n   */\n  const handlePasswordChange = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setIsLoading(true);\n    try {\n      const response = await fetch(\"http://localhost:8080/user/change-password\", {\n        method: \"PUT\",\n        credentials: \"include\",\n        // JWT-Cookie wird mitgesendet\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          oldPassword: oldPassword,\n          newPassword: newPassword\n        })\n      });\n      if (response.ok) {\n        console.log(\"Password successfully changed.\");\n        navigate(\"/myaccount\");\n      } else {\n        // Fehlermeldung aus Backend lesen\n        const msg = await response.text();\n        setError(msg || \"An error occurred while changing password.\");\n      }\n    } catch (error) {\n      console.error(\"Error while changing password:\", error);\n      setError(\"Network or server error.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"password-change-container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"password-change-form\",\n      onSubmit: handlePasswordChange,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => navigate(\"/myaccount\"),\n        className: \"back-button\",\n        children: \"\\u2190 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"oldPassword\",\n        children: \"Old Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"oldPassword\",\n        type: \"password\",\n        placeholder: \"Enter old password\",\n        autoComplete: \"current-password\",\n        onChange: e => setOldPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"newPassword\",\n        children: \"New Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"newPassword\",\n        type: \"password\",\n        placeholder: \"Enter new password\",\n        autoComplete: \"new-password\",\n        onChange: e => setNewPassword(e.target.value),\n        required: true,\n        minLength: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"password-change\",\n        disabled: isLoading,\n        children: isLoading ? \"Processing...\" : \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n_s(ChangePassword, \"C5XIt6NNe13NGoIDBv1PRMef+4U=\", false, function () {\n  return [useNavigate];\n});\n_c = ChangePassword;\nexport default ChangePassword;\nvar _c;\n$RefreshReg$(_c, \"ChangePassword\");","map":{"version":3,"names":["useNavigate","useState","jsxDEV","_jsxDEV","ChangePassword","_s","navigate","oldPassword","setOldPassword","newPassword","setNewPassword","error","setError","isLoading","setIsLoading","handlePasswordChange","e","preventDefault","response","fetch","method","credentials","headers","body","JSON","stringify","ok","console","log","msg","text","className","children","onSubmit","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","placeholder","autoComplete","onChange","target","value","required","minLength","disabled","_c","$RefreshReg$"],"sources":["/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ChangePassword.jsx"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport \"../styles/changepassword.css\";\n\n/**\n * Komponente zum Ändern des Benutzerpassworts.\n *\n * <p>Diese React-Komponente bietet ein Formular zur Änderung des Passworts\n * des aktuell eingeloggten Benutzers. Sie sendet eine Anfrage an den\n * Spring-Boot-Endpunkt <code>/user/change-password</code> und verwendet dabei\n * das JWT-Cookie für die Authentifizierung.</p>\n *\n * <ul>\n *   <li>Validiert Eingaben lokal (z. B. Mindestlänge des neuen Passworts).</li>\n *   <li>Zeigt Fehlermeldungen direkt im Formular an.</li>\n *   <li>Leitet nach erfolgreicher Änderung zur Konto-Seite weiter.</li>\n * </ul>\n *\n * @component\n * @returns {JSX.Element} The password change form component.\n */\nfunction ChangePassword() {\n    const navigate = useNavigate();\n\n    /** Zustand: altes Passwort */\n    const [oldPassword, setOldPassword] = useState(\"\");\n    /** Zustand: neues Passwort */\n    const [newPassword, setNewPassword] = useState(\"\");\n    /** Zustand: Fehlermeldung */\n    const [error, setError] = useState(\"\");\n    /** Zustand: Loading-Indikator */\n    const [isLoading, setIsLoading] = useState(false);\n\n    /**\n     * Sendet die Passwortänderung an das Backend.\n     *\n     * @async\n     * @param {Event} e - Submit-Event des Formulars\n     */\n    const handlePasswordChange = async (e) => {\n        e.preventDefault();\n        setError(\"\");\n        setIsLoading(true);\n\n        try {\n            const response = await fetch(\"http://localhost:8080/user/change-password\", {\n                method: \"PUT\",\n                credentials: \"include\", // JWT-Cookie wird mitgesendet\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({\n                    oldPassword: oldPassword,\n                    newPassword: newPassword\n                })\n            });\n\n            if (response.ok) {\n                console.log(\"Password successfully changed.\");\n                navigate(\"/myaccount\");\n            } else {\n                // Fehlermeldung aus Backend lesen\n                const msg = await response.text();\n                setError(msg || \"An error occurred while changing password.\");\n            }\n        } catch (error) {\n            console.error(\"Error while changing password:\", error);\n            setError(\"Network or server error.\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"password-change-container\">\n            <form className=\"password-change-form\" onSubmit={handlePasswordChange}>\n                {/* Zurück-Button zur Konto-Seite */}\n                <button\n                    type=\"button\"\n                    onClick={() => navigate(\"/myaccount\")}\n                    className=\"back-button\"\n                >\n                    ← Back\n                </button>\n\n                <h1>Change Password</h1>\n\n                {/* Eingabefeld: altes Passwort */}\n                <label htmlFor=\"oldPassword\">Old Password</label>\n                <input\n                    id=\"oldPassword\"\n                    type=\"password\"\n                    placeholder=\"Enter old password\"\n                    autoComplete=\"current-password\"\n                    onChange={(e) => setOldPassword(e.target.value)}\n                    required\n                />\n\n                {/* Eingabefeld: neues Passwort */}\n                <label htmlFor=\"newPassword\">New Password</label>\n                <input\n                    id=\"newPassword\"\n                    type=\"password\"\n                    placeholder=\"Enter new password\"\n                    autoComplete=\"new-password\"\n                    onChange={(e) => setNewPassword(e.target.value)}\n                    required\n                    minLength={6}\n                />\n\n                {/* Fehlermeldung */}\n                {error && <p className=\"error-message\">{error}</p>}\n\n                {/* Absenden */}\n                <button\n                    type=\"submit\"\n                    className=\"password-change\"\n                    disabled={isLoading}\n                >\n                    {isLoading ? \"Processing...\" : \"Change Password\"}\n                </button>\n            </form>\n        </div>\n    );\n}\n\nexport default ChangePassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}