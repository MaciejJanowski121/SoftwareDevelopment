{"ast":null,"code":"var _jsxFileName = \"/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ReservationForm.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// src/components/ReservationForm.jsx\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n/**\n * Öffnungszeiten-/Form-Grenzen.\n * - MIN_MIN/MAX_MIN: erlaubte Dauer in Minuten\n * - OPENING_HOUR/LAST_START_HOUR: früheste/späteste Startzeit (Ende max. 22:00)\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MIN_MIN = 30,\n  MAX_MIN = 300,\n  OPENING_HOUR = 12,\n  LAST_START_HOUR = 21;\n\n/** Links mit führender Null (z. B. 9 -> \"09\"). */\nconst pad = n => n < 10 ? `0${n}` : `${n}`;\n\n/** Wandelt ein Date in ISO_LOCAL_DATE_TIME (yyyy-MM-dd'T'HH:mm:ss) um. */\nconst toIso = d => `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;\n\n/**\n * Erzeugt den Startzeitpunkt aus Datum (yyyy-MM-dd), Stunde und Minute.\n * @param {string} date ISO-Datum (yyyy-MM-dd)\n * @param {string|number} h Stunde\n * @param {string|number} m Minute\n * @returns {Date|null}\n */\nconst buildStart = (date, h, m) => date ? new Date(`${date}T${pad(+h)}:${pad(+m)}:00`) : null;\n\n/**\n * Berechnet die maximal zulässige Dauer (in Minuten) für einen gegebenen Start,\n * sodass das Ende nicht nach 22:00 Uhr liegt.\n * @param {Date|null} start\n * @returns {number}\n */\nconst maxMinutesForStart = start => {\n  if (!start) return MAX_MIN;\n  const end22 = new Date(start);\n  end22.setHours(22, 0, 0, 0);\n  return Math.max(0, Math.min(MAX_MIN, Math.floor((end22 - start) / 60000)));\n};\n\n/**\n * Debounce-Effect-Hook.\n *\n * Führt eine Funktion erst nach Ablauf von `ms` aus. Falls sich die Abhängigkeiten\n * vorher ändern oder die Komponente unmountet, wird abgebrochen (AbortController).\n *\n * @param {(signal: AbortSignal) => (void|Promise<void>)} fn\n * @param {any[]} deps\n * @param {number} [ms=300]\n */\nfunction useDebouncedEffect(fn, deps, ms = 300) {\n  _s();\n  const ctrlRef = useRef();\n  useEffect(() => {\n    const t = setTimeout(() => fn((ctrlRef.current = new AbortController()).signal), ms);\n    return () => {\n      var _ctrlRef$current;\n      clearTimeout(t);\n      (_ctrlRef$current = ctrlRef.current) === null || _ctrlRef$current === void 0 ? void 0 : _ctrlRef$current.abort();\n    };\n  }, deps);\n}\n\n/**\n * Lädt verfügbare Tische für ein gegebenes Startdatum und eine Dauer.\n *\n * - Debounced-Abfrage (300ms), um unnötige Requests zu vermeiden.\n * - Respektiert Öffnungszeiten und \"Ende bis 22:00\"-Regel clientseitig.\n *\n * @param {string} API Basis-URL des Backends\n * @param {Date|null} startDateObj Startzeitpunkt\n * @param {number} minutes gewünschte Dauer in Minuten\n * @returns {Array<{id:number, tableNumber:number, numberOfSeats:number}>}\n */\n_s(useDebouncedEffect, \"ZF+CzY0kGaN5uRhe4GxizbHitR8=\");\nfunction useAvailableTables(API, startDateObj, minutes) {\n  _s2();\n  const [data, setData] = useState([]);\n  const key = useMemo(() => startDateObj ? `${toIso(startDateObj)}|${minutes}` : \"\", [startDateObj, minutes]);\n  useDebouncedEffect(async signal => {\n    if (!startDateObj || !minutes) return setData([]);\n    const h = startDateObj.getHours(),\n      mm = startDateObj.getMinutes();\n    // Clientseitige Guards gemäß Öffnungszeiten\n    if (h < OPENING_HOUR || h > LAST_START_HOUR || h === LAST_START_HOUR && mm > 30) return setData([]);\n    if (maxMinutesForStart(startDateObj) < MIN_MIN) return setData([]);\n    const res = await fetch(`${API}/api/reservations/available?start=${encodeURIComponent(toIso(startDateObj))}&minutes=${minutes}`, {\n      credentials: \"include\",\n      signal\n    });\n    setData(res.ok ? await res.json() : []);\n  }, [API, key], 300);\n  return data;\n}\n\n/**\n * Formular zur Erstellung einer Tischreservierung.\n *\n * <p>Funktionen:</p>\n * <ul>\n *   <li>Ermittelt zulässige Start-/Endezeiten (Öffnung 12:00, letzte Startzeit 21:30, Ende bis 22:00).</li>\n *   <li>Lädt verfügbare Tische dynamisch (debounced), abhängig von Startzeit und Dauer.</li>\n *   <li>Validiert Eingaben clientseitig; zeigt konkrete Fehlermeldungen in <code>formError</code> an.</li>\n *   <li>Reagiert auf Konflikte aus dem Backend (ProblemDetail-Typen) mit sprechenden Meldungen.</li>\n * </ul>\n *\n * <p><strong>Barrierefreiheit/Testbarkeit:</strong> Labels sind mit <code>htmlFor</code> verknüpft;\n * ein Fehlertext trägt <code>data-cy=\"form-error\"</code> für End-to-End-Tests.</p>\n *\n * @component\n * @param {{ setReservation: (list: any[]) => void }} props\n * @returns {JSX.Element}\n */\n_s2(useAvailableTables, \"imzt7fJoG/h23RRK4GAO2dV4acA=\", false, function () {\n  return [useDebouncedEffect];\n});\nexport default function ReservationForm({\n  setReservation\n}) {\n  _s3();\n  const navigate = useNavigate();\n\n  // Basis-URL (fest für lokale Entwicklung; kein .env erforderlich)\n  const API = useMemo(() => process.env.REACT_APP_API_URL || \"http://localhost:8080\", []);\n\n  // \"Heute\" als yyyy-MM-dd (min-Wert fürs Date-Input)\n  const today = useMemo(() => {\n    const d = new Date();\n    return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n  }, []);\n  const [date, setDate] = useState(\"\");\n  const [hour, setHour] = useState(\"12\");\n  const [minute, setMinute] = useState(\"00\");\n  const [minutes, setMinutes] = useState(120);\n  const [tableNumber, setTableNumber] = useState(\"\");\n  const [formError, setFormError] = useState(\"\");\n  useEffect(() => {\n    const now = new Date(),\n      next = {\n        d: today,\n        h: now.getHours(),\n        m: now.getMinutes() < 30 ? \"30\" : \"00\"\n      };\n    if (next.m === \"00\" && now.getMinutes() >= 30) next.h++;\n    if (next.h < OPENING_HOUR) next.h = OPENING_HOUR;\n    if (next.h > LAST_START_HOUR || next.h === LAST_START_HOUR && next.m > \"30\") {\n      const t = new Date();\n      t.setDate(t.getDate() + 1);\n      next.d = `${t.getFullYear()}-${pad(t.getMonth() + 1)}-${pad(t.getDate())}`;\n      next.h = OPENING_HOUR;\n      next.m = \"00\";\n    }\n    setDate(next.d);\n    setHour(String(next.h));\n    setMinute(next.m);\n  }, [today]);\n  const start = buildStart(date, hour, minute);\n  const maxAllowed = maxMinutesForStart(start);\n  const endPreview = start ? new Date(start.getTime() + minutes * 60000) : null;\n  const availableTables = useAvailableTables(API, start, minutes);\n  useEffect(() => {\n    if (minutes > maxAllowed) {\n      const clamped = Math.max(MIN_MIN, maxAllowed);\n      setMinutes(clamped);\n      setFormError(\"\");\n    }\n  }, [maxAllowed, minutes]);\n  useEffect(() => {\n    if (!tableNumber) return;\n    if (!availableTables.some(t => String(t.tableNumber) === String(tableNumber))) {\n      setTableNumber(\"\");\n      setFormError(\"Der ausgewählte Tisch ist nicht mehr verfügbar.\");\n    }\n  }, [availableTables, tableNumber]);\n\n  /** Submit-Handler: validiert clientseitig und sendet anschließend an das Backend. */\n  async function onSubmit(e) {\n    e.preventDefault();\n    const err = m => (setFormError(m), false);\n    if (!start) return err(\"Bitte Startzeit auswählen.\");\n    const h = start.getHours(),\n      mm = start.getMinutes();\n    if (h < OPENING_HOUR || h > LAST_START_HOUR || h === LAST_START_HOUR && mm > 30) return err(\"Reservierungen sind nur zwischen 12:00 und 21:30 (Ende bis 22:00) möglich.\");\n    if (start < new Date()) return err(\"Reservierungen in der Vergangenheit sind nicht möglich.\");\n    if (!tableNumber) return err(\"Bitte Tisch auswählen.\");\n    if (minutes < MIN_MIN || minutes > MAX_MIN || minutes > maxAllowed) return err(`Reservierungen müssen zwischen ${MIN_MIN} und ${Math.max(MIN_MIN, maxAllowed)} Minuten liegen.`);\n    try {\n      const end = new Date(start.getTime() + minutes * 60000);\n      const res = await fetch(`${API}/api/reservations`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          tableNumber: +tableNumber,\n          startTime: toIso(start),\n          endTime: toIso(end)\n        })\n      });\n      if (res.status === 409) {\n        let msg = \"Reservierungskonflikt.\";\n        try {\n          const j = await res.json();\n          const type = String((j === null || j === void 0 ? void 0 : j.type) || \"\");\n          if (type.includes(\"user-has-reservation\")) msg = \"Du hast bereits eine aktive Reservierung.\";else if (type.includes(\"table-already-reserved\")) msg = \"Dieser Tisch ist in dem gewählten Zeitraum bereits reserviert.\";else msg = (j === null || j === void 0 ? void 0 : j.detail) || (j === null || j === void 0 ? void 0 : j.title) || msg;\n        } catch {}\n        return setFormError(msg);\n      }\n      if (!res.ok) throw new Error(await res.text());\n\n      // Erfolgreich: DTO übernehmen + navigieren\n      const data = await res.json();\n      setReservation([data]);\n      navigate(\"/reservations/my\");\n    } catch (e) {\n      setFormError(`Reservierung fehlgeschlagen: ${e.message || e}`);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    className: \"reservation-form\",\n    noValidate: true,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"startDate\",\n      children: \"Datum\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"startDate\",\n      type: \"date\",\n      value: date,\n      min: today,\n      onChange: e => {\n        setDate(e.target.value);\n        setFormError(\"\");\n      },\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Uhrzeit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"time-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"hour\",\n        value: hour,\n        onChange: e => {\n          setHour(e.target.value);\n          setFormError(\"\");\n        },\n        children: Array.from({\n          length: LAST_START_HOUR - OPENING_HOUR + 1\n        }, (_, i) => OPENING_HOUR + i).map(h => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: String(h),\n          children: pad(h)\n        }, h, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"minute\",\n        value: minute,\n        onChange: e => {\n          setMinute(e.target.value);\n          setFormError(\"\");\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"00\",\n          children: \"00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"30\",\n          children: \"30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"duration\",\n      children: \"Dauer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      id: \"duration\",\n      value: minutes,\n      required: true,\n      onChange: e => {\n        setMinutes(+e.target.value);\n        setFormError(\"\");\n      },\n      children: Array.from({\n        length: (MAX_MIN - MIN_MIN) / 30 + 1\n      }, (_, i) => MIN_MIN + i * 30).map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: m,\n        disabled: m > maxAllowed,\n        children: [m < 60 ? `${m} Min` : `${Math.floor(m / 60)} Std${m % 60 ? ` ${m % 60} Min` : \"\"}`, m > maxAllowed ? \" (bis 22:00 Uhr)\" : \"\"]\n      }, m, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"tableNumber\",\n      children: \"Tisch\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      id: \"tableNumber\",\n      required: true,\n      value: tableNumber,\n      onChange: e => setTableNumber(e.target.value),\n      disabled: maxAllowed < MIN_MIN,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Tisch ausw\\xE4hlen\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }, this), availableTables.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: t.tableNumber,\n        children: [\"Tisch \", t.tableNumber, \" (\", t.numberOfSeats, \" Pers.)\"]\n      }, t.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }, this), start && /*#__PURE__*/_jsxDEV(\"small\", {\n      style: {\n        display: \"block\",\n        marginTop: 6,\n        color: \"#555\"\n      },\n      children: [\"Ende:\", \" \", new Date(start.getTime() + minutes * 60000).toLocaleTimeString(\"de-DE\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n      }), \" \", \"(sp\\xE4testens 22:00 Uhr)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 17\n    }, this), formError && /*#__PURE__*/_jsxDEV(\"p\", {\n      \"data-cy\": \"form-error\",\n      style: {\n        color: \"#c62828\",\n        marginTop: 10\n      },\n      children: formError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: !start || !tableNumber || maxAllowed < MIN_MIN,\n      style: {\n        marginTop: 12\n      },\n      children: \"Reservieren\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 9\n  }, this);\n}\n_s3(ReservationForm, \"JqVv3+6yRQlX6foqq5fMrWcLIaY=\", false, function () {\n  return [useNavigate, useAvailableTables];\n});\n_c = ReservationForm;\nvar _c;\n$RefreshReg$(_c, \"ReservationForm\");","map":{"version":3,"names":["useEffect","useMemo","useRef","useState","useNavigate","jsxDEV","_jsxDEV","MIN_MIN","MAX_MIN","OPENING_HOUR","LAST_START_HOUR","pad","n","toIso","d","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","buildStart","date","h","m","Date","maxMinutesForStart","start","end22","setHours","Math","max","min","floor","useDebouncedEffect","fn","deps","ms","_s","ctrlRef","t","setTimeout","current","AbortController","signal","_ctrlRef$current","clearTimeout","abort","useAvailableTables","API","startDateObj","minutes","_s2","data","setData","key","mm","res","fetch","encodeURIComponent","credentials","ok","json","ReservationForm","setReservation","_s3","navigate","process","env","REACT_APP_API_URL","today","setDate","hour","setHour","minute","setMinute","setMinutes","tableNumber","setTableNumber","formError","setFormError","now","next","String","maxAllowed","endPreview","getTime","availableTables","clamped","some","onSubmit","e","preventDefault","err","end","method","headers","body","JSON","stringify","startTime","endTime","status","msg","j","type","includes","detail","title","Error","text","message","className","noValidate","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","value","onChange","target","required","Array","from","length","_","i","map","disabled","numberOfSeats","style","display","marginTop","color","toLocaleTimeString","_c","$RefreshReg$"],"sources":["/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ReservationForm.jsx"],"sourcesContent":["// src/components/ReservationForm.jsx\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n/**\n * Öffnungszeiten-/Form-Grenzen.\n * - MIN_MIN/MAX_MIN: erlaubte Dauer in Minuten\n * - OPENING_HOUR/LAST_START_HOUR: früheste/späteste Startzeit (Ende max. 22:00)\n */\nconst MIN_MIN = 30, MAX_MIN = 300, OPENING_HOUR = 12, LAST_START_HOUR = 21;\n\n/** Links mit führender Null (z. B. 9 -> \"09\"). */\nconst pad = (n) => (n < 10 ? `0${n}` : `${n}`);\n\n/** Wandelt ein Date in ISO_LOCAL_DATE_TIME (yyyy-MM-dd'T'HH:mm:ss) um. */\nconst toIso = (d) =>\n    `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;\n\n/**\n * Erzeugt den Startzeitpunkt aus Datum (yyyy-MM-dd), Stunde und Minute.\n * @param {string} date ISO-Datum (yyyy-MM-dd)\n * @param {string|number} h Stunde\n * @param {string|number} m Minute\n * @returns {Date|null}\n */\nconst buildStart = (date, h, m) => (date ? new Date(`${date}T${pad(+h)}:${pad(+m)}:00`) : null);\n\n/**\n * Berechnet die maximal zulässige Dauer (in Minuten) für einen gegebenen Start,\n * sodass das Ende nicht nach 22:00 Uhr liegt.\n * @param {Date|null} start\n * @returns {number}\n */\nconst maxMinutesForStart = (start) => {\n    if (!start) return MAX_MIN;\n    const end22 = new Date(start);\n    end22.setHours(22, 0, 0, 0);\n    return Math.max(0, Math.min(MAX_MIN, Math.floor((end22 - start) / 60000)));\n};\n\n/**\n * Debounce-Effect-Hook.\n *\n * Führt eine Funktion erst nach Ablauf von `ms` aus. Falls sich die Abhängigkeiten\n * vorher ändern oder die Komponente unmountet, wird abgebrochen (AbortController).\n *\n * @param {(signal: AbortSignal) => (void|Promise<void>)} fn\n * @param {any[]} deps\n * @param {number} [ms=300]\n */\nfunction useDebouncedEffect(fn, deps, ms = 300) {\n    const ctrlRef = useRef();\n    useEffect(() => {\n        const t = setTimeout(() => fn((ctrlRef.current = new AbortController()).signal), ms);\n        return () => {\n            clearTimeout(t);\n            ctrlRef.current?.abort();\n        };\n      \n    }, deps);\n}\n\n/**\n * Lädt verfügbare Tische für ein gegebenes Startdatum und eine Dauer.\n *\n * - Debounced-Abfrage (300ms), um unnötige Requests zu vermeiden.\n * - Respektiert Öffnungszeiten und \"Ende bis 22:00\"-Regel clientseitig.\n *\n * @param {string} API Basis-URL des Backends\n * @param {Date|null} startDateObj Startzeitpunkt\n * @param {number} minutes gewünschte Dauer in Minuten\n * @returns {Array<{id:number, tableNumber:number, numberOfSeats:number}>}\n */\nfunction useAvailableTables(API, startDateObj, minutes) {\n    const [data, setData] = useState([]);\n    const key = useMemo(\n        () => (startDateObj ? `${toIso(startDateObj)}|${minutes}` : \"\"),\n        [startDateObj, minutes]\n    );\n\n    useDebouncedEffect(\n        async (signal) => {\n            if (!startDateObj || !minutes) return setData([]);\n            const h = startDateObj.getHours(),\n                mm = startDateObj.getMinutes();\n            // Clientseitige Guards gemäß Öffnungszeiten\n            if (h < OPENING_HOUR || h > LAST_START_HOUR || (h === LAST_START_HOUR && mm > 30))\n                return setData([]);\n            if (maxMinutesForStart(startDateObj) < MIN_MIN) return setData([]);\n\n            const res = await fetch(\n                `${API}/api/reservations/available?start=${encodeURIComponent(\n                    toIso(startDateObj)\n                )}&minutes=${minutes}`,\n                { credentials: \"include\", signal }\n            );\n            setData(res.ok ? await res.json() : []);\n        },\n        [API, key],\n        300\n    );\n    return data;\n}\n\n/**\n * Formular zur Erstellung einer Tischreservierung.\n *\n * <p>Funktionen:</p>\n * <ul>\n *   <li>Ermittelt zulässige Start-/Endezeiten (Öffnung 12:00, letzte Startzeit 21:30, Ende bis 22:00).</li>\n *   <li>Lädt verfügbare Tische dynamisch (debounced), abhängig von Startzeit und Dauer.</li>\n *   <li>Validiert Eingaben clientseitig; zeigt konkrete Fehlermeldungen in <code>formError</code> an.</li>\n *   <li>Reagiert auf Konflikte aus dem Backend (ProblemDetail-Typen) mit sprechenden Meldungen.</li>\n * </ul>\n *\n * <p><strong>Barrierefreiheit/Testbarkeit:</strong> Labels sind mit <code>htmlFor</code> verknüpft;\n * ein Fehlertext trägt <code>data-cy=\"form-error\"</code> für End-to-End-Tests.</p>\n *\n * @component\n * @param {{ setReservation: (list: any[]) => void }} props\n * @returns {JSX.Element}\n */\nexport default function ReservationForm({ setReservation }) {\n    const navigate = useNavigate();\n\n    // Basis-URL (fest für lokale Entwicklung; kein .env erforderlich)\n    const API = useMemo(() => process.env.REACT_APP_API_URL || \"http://localhost:8080\", []);\n\n    // \"Heute\" als yyyy-MM-dd (min-Wert fürs Date-Input)\n    const today = useMemo(() => {\n        const d = new Date();\n        return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n    }, []);\n\n\n    const [date, setDate] = useState(\"\");\n    const [hour, setHour] = useState(\"12\");\n    const [minute, setMinute] = useState(\"00\");\n    const [minutes, setMinutes] = useState(120);\n    const [tableNumber, setTableNumber] = useState(\"\");\n    const [formError, setFormError] = useState(\"\");\n\n\n    useEffect(() => {\n        const now = new Date(),\n            next = { d: today, h: now.getHours(), m: now.getMinutes() < 30 ? \"30\" : \"00\" };\n        if (next.m === \"00\" && now.getMinutes() >= 30) next.h++;\n        if (next.h < OPENING_HOUR) next.h = OPENING_HOUR;\n        if (next.h > LAST_START_HOUR || (next.h === LAST_START_HOUR && next.m > \"30\")) {\n            const t = new Date();\n            t.setDate(t.getDate() + 1);\n            next.d = `${t.getFullYear()}-${pad(t.getMonth() + 1)}-${pad(t.getDate())}`;\n            next.h = OPENING_HOUR;\n            next.m = \"00\";\n        }\n        setDate(next.d);\n        setHour(String(next.h));\n        setMinute(next.m);\n    }, [today]);\n\n\n    const start = buildStart(date, hour, minute);\n    const maxAllowed = maxMinutesForStart(start);\n    const endPreview = start ? new Date(start.getTime() + minutes * 60000) : null;\n\n\n    const availableTables = useAvailableTables(API, start, minutes);\n\n\n    useEffect(() => {\n        if (minutes > maxAllowed) {\n            const clamped = Math.max(MIN_MIN, maxAllowed);\n            setMinutes(clamped);\n            setFormError(\"\");\n        }\n    }, [maxAllowed, minutes]);\n\n\n    useEffect(() => {\n        if (!tableNumber) return;\n        if (!availableTables.some((t) => String(t.tableNumber) === String(tableNumber))) {\n            setTableNumber(\"\");\n            setFormError(\"Der ausgewählte Tisch ist nicht mehr verfügbar.\");\n        }\n    }, [availableTables, tableNumber]);\n\n    /** Submit-Handler: validiert clientseitig und sendet anschließend an das Backend. */\n    async function onSubmit(e) {\n        e.preventDefault();\n        const err = (m) => (setFormError(m), false);\n\n\n        if (!start) return err(\"Bitte Startzeit auswählen.\");\n        const h = start.getHours(),\n            mm = start.getMinutes();\n        if (h < OPENING_HOUR || h > LAST_START_HOUR || (h === LAST_START_HOUR && mm > 30))\n            return err(\"Reservierungen sind nur zwischen 12:00 und 21:30 (Ende bis 22:00) möglich.\");\n        if (start < new Date()) return err(\"Reservierungen in der Vergangenheit sind nicht möglich.\");\n        if (!tableNumber) return err(\"Bitte Tisch auswählen.\");\n        if (minutes < MIN_MIN || minutes > MAX_MIN || minutes > maxAllowed)\n            return err(\n                `Reservierungen müssen zwischen ${MIN_MIN} und ${Math.max(MIN_MIN, maxAllowed)} Minuten liegen.`\n            );\n\n\n        try {\n            const end = new Date(start.getTime() + minutes * 60000);\n            const res = await fetch(`${API}/api/reservations`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                credentials: \"include\",\n                body: JSON.stringify({\n                    tableNumber: +tableNumber,\n                    startTime: toIso(start),\n                    endTime: toIso(end),\n                }),\n            });\n\n\n            if (res.status === 409) {\n                let msg = \"Reservierungskonflikt.\";\n                try {\n                    const j = await res.json();\n                    const type = String(j?.type || \"\");\n                    if (type.includes(\"user-has-reservation\"))\n                        msg = \"Du hast bereits eine aktive Reservierung.\";\n                    else if (type.includes(\"table-already-reserved\"))\n                        msg = \"Dieser Tisch ist in dem gewählten Zeitraum bereits reserviert.\";\n                    else msg = j?.detail || j?.title || msg;\n                } catch {}\n                return setFormError(msg);\n            }\n            if (!res.ok) throw new Error(await res.text());\n\n            // Erfolgreich: DTO übernehmen + navigieren\n            const data = await res.json();\n            setReservation([data]);\n            navigate(\"/reservations/my\");\n        } catch (e) {\n            setFormError(`Reservierung fehlgeschlagen: ${e.message || e}`);\n        }\n    }\n\n    return (\n        <form onSubmit={onSubmit} className=\"reservation-form\" noValidate>\n            {/* Datum */}\n            <label htmlFor=\"startDate\">Datum</label>\n            <input\n                id=\"startDate\"\n                type=\"date\"\n                value={date}\n                min={today}\n                onChange={(e) => {\n                    setDate(e.target.value);\n                    setFormError(\"\");\n                }}\n                required\n            />\n\n            {/* Uhrzeit (Stunde + Minute) */}\n            <label>Uhrzeit</label>\n            <div className=\"time-row\">\n                <select\n                    id=\"hour\"\n                    value={hour}\n                    onChange={(e) => {\n                        setHour(e.target.value);\n                        setFormError(\"\");\n                    }}\n                >\n                    {Array.from(\n                        { length: LAST_START_HOUR - OPENING_HOUR + 1 },\n                        (_, i) => OPENING_HOUR + i\n                    ).map((h) => (\n                        <option key={h} value={String(h)}>\n                            {pad(h)}\n                        </option>\n                    ))}\n                </select>\n                <select\n                    id=\"minute\"\n                    value={minute}\n                    onChange={(e) => {\n                        setMinute(e.target.value);\n                        setFormError(\"\");\n                    }}\n                >\n                    <option value=\"00\">00</option>\n                    <option value=\"30\">30</option>\n                </select>\n            </div>\n\n            {/* Dauer */}\n            <label htmlFor=\"duration\">Dauer</label>\n            <select\n                id=\"duration\"\n                value={minutes}\n                required\n                onChange={(e) => {\n                    setMinutes(+e.target.value);\n                    setFormError(\"\");\n                }}\n            >\n                {Array.from({ length: (MAX_MIN - MIN_MIN) / 30 + 1 }, (_, i) => MIN_MIN + i * 30).map(\n                    (m) => (\n                        <option key={m} value={m} disabled={m > maxAllowed}>\n                            {m < 60\n                                ? `${m} Min`\n                                : `${Math.floor(m / 60)} Std${m % 60 ? ` ${m % 60} Min` : \"\"}`}\n                            {m > maxAllowed ? \" (bis 22:00 Uhr)\" : \"\"}\n                        </option>\n                    )\n                )}\n            </select>\n\n            {/* Tisch */}\n            <label htmlFor=\"tableNumber\">Tisch</label>\n            <select\n                id=\"tableNumber\"\n                required\n                value={tableNumber}\n                onChange={(e) => setTableNumber(e.target.value)}\n                disabled={maxAllowed < MIN_MIN}\n            >\n                <option value=\"\">Tisch auswählen…</option>\n                {availableTables.map((t) => (\n                    <option key={t.id} value={t.tableNumber}>\n                        Tisch {t.tableNumber} ({t.numberOfSeats} Pers.)\n                    </option>\n                ))}\n            </select>\n\n            {/* Ende-Vorschau */}\n            {start && (\n                <small style={{ display: \"block\", marginTop: 6, color: \"#555\" }}>\n                    Ende:{\" \"}\n                    {new Date(start.getTime() + minutes * 60000).toLocaleTimeString(\"de-DE\", {\n                        hour: \"2-digit\",\n                        minute: \"2-digit\",\n                    })}{\" \"}\n                    (spätestens 22:00 Uhr)\n                </small>\n            )}\n\n            {/* Fehlermeldung für Tests selektierbar */}\n            {formError && (\n                <p data-cy=\"form-error\" style={{ color: \"#c62828\", marginTop: 10 }}>\n                    {formError}\n                </p>\n            )}\n\n            {/* Submit */}\n            <button\n                type=\"submit\"\n                disabled={!start || !tableNumber || maxAllowed < MIN_MIN}\n                style={{ marginTop: 12 }}\n            >\n                Reservieren\n            </button>\n        </form>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}