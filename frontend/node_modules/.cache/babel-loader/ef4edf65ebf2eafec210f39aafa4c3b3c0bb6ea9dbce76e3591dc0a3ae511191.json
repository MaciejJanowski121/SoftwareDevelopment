{"ast":null,"code":"var _jsxFileName = \"/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ReservationForm.jsx\",\n  _s = $RefreshSig$();\n// src/components/ReservationForm.jsx\nimport { useState, useEffect, useMemo, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ReservationForm({\n  setReservation\n}) {\n  _s();\n  const [startDatePart, setStartDatePart] = useState(\"\");\n  const [hour, setHour] = useState(\"12\");\n  const [minute, setMinute] = useState(\"00\");\n  const [minutes, setMinutes] = useState(120); // 30..300\n  const [tableNumber, setTableNumber] = useState(\"\");\n  const [availableTables, setAvailableTables] = useState([]);\n  const [formError, setFormError] = useState(\"\");\n  const navigate = useNavigate();\n  const API = useMemo(() => process.env.REACT_APP_API_URL || \"http://localhost:8080\", []);\n\n  // reguły\n  const MIN_MIN = 30;\n  const MAX_MIN = 300;\n  const OPENING_HOUR = 12;\n  const LAST_SELECTABLE_HOUR = 21; // 22 wykluczone\n  const pad = n => n < 10 ? \"0\" + n : \"\" + n;\n  const todayDateStr = useMemo(() => {\n    const d = new Date();\n    return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n  }, []);\n  const toIsoWithSeconds = date => `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}T${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(date.getSeconds())}`;\n  const startTimePart = `${pad(Number(hour))}:${pad(Number(minute))}`;\n  const buildStartDate = (date, hh, mm) => date ? new Date(`${date}T${pad(Number(hh))}:${pad(Number(mm))}:00`) : null;\n  const startDateObj = buildStartDate(startDatePart, hour, minute);\n  const maxMinutesForStart = start => {\n    if (!start) return MAX_MIN;\n    const latestEnd = new Date(start);\n    latestEnd.setHours(22, 0, 0, 0);\n    const diffMin = Math.floor((latestEnd - start) / 60000);\n    if (diffMin <= 0) return 0;\n    return Math.min(MAX_MIN, diffMin);\n  };\n  const maxAllowedForHint = maxMinutesForStart(startDateObj);\n  const endPreview = startDateObj && minutes ? new Date(startDateObj.getTime() + minutes * 60000) : null;\n\n  // domyślny start (dziś, zaokrąglenie do 00/30; <12 → 12:00; >21:30 → jutro 12:00)\n  useEffect(() => {\n    const now = new Date();\n    const todayStr = `${now.getFullYear()}-${pad(now.getMonth() + 1)}-${pad(now.getDate())}`;\n    if (!startDatePart) setStartDatePart(todayStr);\n    let h = now.getHours();\n    let m = now.getMinutes() < 30 ? 30 : 0;\n    if (m === 0 && now.getMinutes() >= 30) h++;\n    if (h < OPENING_HOUR) {\n      h = OPENING_HOUR;\n      m = 0;\n    } else if (h > LAST_SELECTABLE_HOUR || h === LAST_SELECTABLE_HOUR && m > 30) {\n      const t = new Date(now);\n      t.setDate(now.getDate() + 1);\n      const nextStr = `${t.getFullYear()}-${pad(t.getMonth() + 1)}-${pad(t.getDate())}`;\n      setStartDatePart(nextStr);\n      h = OPENING_HOUR;\n      m = 0;\n    }\n    setHour(String(h));\n    setMinute(pad(m));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // — ograniczenie zapytań: debounce + abort + pamięć ostatniego klucza\n  const lastQueryRef = useRef(\"\");\n  useEffect(() => {\n    setFormError(\"\");\n    if (!startDateObj || !minutes) {\n      setAvailableTables([]);\n      return;\n    }\n    const h = startDateObj.getHours();\n    const mm = startDateObj.getMinutes();\n    if (h < OPENING_HOUR || h > LAST_SELECTABLE_HOUR || h === LAST_SELECTABLE_HOUR && mm > 30) {\n      setAvailableTables([]);\n      return;\n    }\n    const maxAllowed = maxMinutesForStart(startDateObj);\n    if (maxAllowed < MIN_MIN) {\n      setAvailableTables([]);\n      return;\n    }\n    const startISO = toIsoWithSeconds(startDateObj);\n    const key = `${startISO}|${minutes}`;\n    if (key === lastQueryRef.current) return;\n    const ctrl = new AbortController();\n    const t = setTimeout(async () => {\n      try {\n        const res = await fetch(`${API}/api/reservations/available?start=${encodeURIComponent(startISO)}&minutes=${minutes}`, {\n          credentials: \"include\",\n          signal: ctrl.signal\n        });\n        if (!res.ok) throw new Error(\"Fehler beim Laden der verfügbaren Tische.\");\n        const data = await res.json();\n        setAvailableTables(Array.isArray(data) ? data : []);\n        lastQueryRef.current = key;\n      } catch (e) {\n        if (e.name !== \"AbortError\") {\n          console.error(e);\n          setAvailableTables([]);\n        }\n      }\n    }, 300);\n    return () => {\n      clearTimeout(t);\n      ctrl.abort();\n    };\n  }, [API, minutes, startDateObj]);\n\n  // reset stolika jeśli zniknął\n  useEffect(() => {\n    if (!tableNumber) return;\n    const stillAvail = availableTables.some(t => String(t.tableNumber) === String(tableNumber));\n    if (!stillAvail) setTableNumber(\"\");\n  }, [availableTables, tableNumber]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setFormError(\"\");\n    if (!startDateObj) return setFormError(\"Bitte Startzeit auswählen.\");\n    const h = startDateObj.getHours();\n    const mm = startDateObj.getMinutes();\n    if (h < OPENING_HOUR || h > LAST_SELECTABLE_HOUR || h === LAST_SELECTABLE_HOUR && mm > 30) {\n      return setFormError(\"Reservierungen sind nur zwischen 12:00 und 21:30 (Ende bis 22:00) möglich.\");\n    }\n    if (startDateObj < new Date()) {\n      return setFormError(\"Reservierungen in der Vergangenheit sind nicht möglich.\");\n    }\n    if (!minutes || minutes < MIN_MIN || minutes > MAX_MIN) {\n      return setFormError(\"Die Dauer muss zwischen 30 und 300 Minuten liegen.\");\n    }\n    const maxAllowed = maxMinutesForStart(startDateObj);\n    if (minutes > maxAllowed) {\n      if (maxAllowed < MIN_MIN) {\n        return setFormError(\"Die letzte Reservierung muss spätestens um 22:00 Uhr enden. Bitte frühere Zeit wählen.\");\n      }\n      return setFormError(`Für diese Startzeit ist maximal ${maxAllowed} Minuten erlaubt (bis 22:00 Uhr).`);\n    }\n    if (!tableNumber) return setFormError(\"Bitte Tisch auswählen.\");\n    const end = new Date(startDateObj.getTime() + minutes * 60000);\n    const payload = {\n      tableNumber: Number(tableNumber),\n      startTime: toIsoWithSeconds(startDateObj),\n      endTime: toIsoWithSeconds(end)\n    };\n    try {\n      const resp = await fetch(`${API}/api/reservations`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\",\n        body: JSON.stringify(payload)\n      });\n      const txt = await resp.text();\n      if (!resp.ok) throw new Error(txt || \"Reservierung fehlgeschlagen.\");\n      const data = txt ? JSON.parse(txt) : null;\n      setReservation([data]);\n      navigate(\"/reservations/my\");\n    } catch (err) {\n      console.error(err);\n      setFormError(`Reservierung fehlgeschlagen: ${err.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"newreservation-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"newreservation-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newreservation-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Neue Reservierung\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"reservation-form\",\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"startDate\",\n          style: {\n            display: \"block\",\n            marginBottom: 4\n          },\n          children: \"Datum\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"startDate\",\n          type: \"date\",\n          value: startDatePart,\n          min: todayDateStr,\n          onChange: e => {\n            setStartDatePart(e.target.value);\n            setFormError(\"\");\n            lastQueryRef.current = \"\";\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: \"block\",\n            margin: \"12px 0 4px\"\n          },\n          children: \"Uhrzeit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"hour\",\n            value: hour,\n            onChange: e => {\n              setHour(e.target.value);\n              setFormError(\"\");\n              lastQueryRef.current = \"\";\n            },\n            \"aria-label\": \"Stunde\",\n            children: Array.from({\n              length: LAST_SELECTABLE_HOUR - OPENING_HOUR + 1\n            }, (_, i) => OPENING_HOUR + i).map(h => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: String(h),\n              children: pad(h)\n            }, h, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"minute\",\n            value: minute,\n            onChange: e => {\n              setMinute(e.target.value);\n              setFormError(\"\");\n              lastQueryRef.current = \"\";\n            },\n            \"aria-label\": \"Minute\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"00\",\n              children: \"00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"30\",\n              children: \"30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            display: \"block\",\n            marginTop: 4,\n            color: \"#555\"\n          },\n          children: [\"Start nur von \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"12:00\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 39\n          }, this), \" bis \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"21:30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 66\n          }, this), \" (Ende sp\\xE4testens 22:00).\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"startTime\",\n          type: \"hidden\",\n          value: startDatePart ? `${startDatePart}T${startTimePart}` : \"\",\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"duration\",\n          style: {\n            display: \"block\",\n            margin: \"12px 0 4px\"\n          },\n          children: \"Dauer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"duration\",\n          value: minutes,\n          onChange: e => {\n            setMinutes(Number(e.target.value));\n            setFormError(\"\");\n            lastQueryRef.current = \"\";\n          },\n          required: true,\n          children: Array.from({\n            length: (MAX_MIN - MIN_MIN) / 30 + 1\n          }, (_, i) => {\n            const m = MIN_MIN + i * 30;\n            const disabled = !!startDateObj && m > maxMinutesForStart(startDateObj);\n            const label = m < 60 ? `${m} Min` : `${Math.floor(m / 60)} Std${m % 60 ? ` ${m % 60} Min` : \"\"}`;\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: m,\n              disabled: disabled,\n              children: [label, disabled ? \" (bis 22:00 Uhr)\" : \"\"]\n            }, m, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"tableNumber\",\n          style: {\n            display: \"block\",\n            margin: \"12px 0 4px\"\n          },\n          children: \"Tisch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"tableNumber\",\n          value: tableNumber,\n          onChange: e => setTableNumber(e.target.value),\n          required: true,\n          disabled: maxAllowedForHint < MIN_MIN,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Tisch ausw\\xE4hlen\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 25\n          }, this), availableTables.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: t.tableNumber,\n            children: [\"Tisch \", t.tableNumber, \" (\", t.numberOfSeats, \" Pers.)\"]\n          }, t.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 21\n        }, this), endPreview && /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            display: \"block\",\n            marginTop: 6,\n            color: \"#555\"\n          },\n          children: [\"Ende:\", \" \", endPreview.toLocaleTimeString(\"de-DE\", {\n            hour: \"2-digit\",\n            minute: \"2-digit\"\n          }), \" \", \"(sp\\xE4testens 22:00 Uhr)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 25\n        }, this), formError && /*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-cy\": \"form-error\",\n          style: {\n            color: \"#c62828\",\n            marginTop: 10\n          },\n          children: formError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: maxAllowedForHint < MIN_MIN,\n          children: \"Reservieren\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 9\n  }, this);\n}\n_s(ReservationForm, \"IvFvBgaE2mpN6yGA04JDjm29BYc=\", false, function () {\n  return [useNavigate];\n});\n_c = ReservationForm;\nexport default ReservationForm;\nvar _c;\n$RefreshReg$(_c, \"ReservationForm\");","map":{"version":3,"names":["useState","useEffect","useMemo","useRef","useNavigate","jsxDEV","_jsxDEV","ReservationForm","setReservation","_s","startDatePart","setStartDatePart","hour","setHour","minute","setMinute","minutes","setMinutes","tableNumber","setTableNumber","availableTables","setAvailableTables","formError","setFormError","navigate","API","process","env","REACT_APP_API_URL","MIN_MIN","MAX_MIN","OPENING_HOUR","LAST_SELECTABLE_HOUR","pad","n","todayDateStr","d","Date","getFullYear","getMonth","getDate","toIsoWithSeconds","date","getHours","getMinutes","getSeconds","startTimePart","Number","buildStartDate","hh","mm","startDateObj","maxMinutesForStart","start","latestEnd","setHours","diffMin","Math","floor","min","maxAllowedForHint","endPreview","getTime","now","todayStr","h","m","t","setDate","nextStr","String","lastQueryRef","maxAllowed","startISO","key","current","ctrl","AbortController","setTimeout","res","fetch","encodeURIComponent","credentials","signal","ok","Error","data","json","Array","isArray","e","name","console","error","clearTimeout","abort","stillAvail","some","handleSubmit","preventDefault","end","payload","startTime","endTime","resp","method","headers","body","JSON","stringify","txt","text","parse","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","noValidate","htmlFor","style","display","marginBottom","id","type","value","onChange","target","required","margin","gap","from","length","_","i","map","marginTop","color","readOnly","disabled","label","numberOfSeats","toLocaleTimeString","_c","$RefreshReg$"],"sources":["/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ReservationForm.jsx"],"sourcesContent":["// src/components/ReservationForm.jsx\nimport { useState, useEffect, useMemo, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction ReservationForm({ setReservation }) {\n    const [startDatePart, setStartDatePart] = useState(\"\");\n    const [hour, setHour] = useState(\"12\");\n    const [minute, setMinute] = useState(\"00\");\n    const [minutes, setMinutes] = useState(120); // 30..300\n    const [tableNumber, setTableNumber] = useState(\"\");\n    const [availableTables, setAvailableTables] = useState([]);\n    const [formError, setFormError] = useState(\"\");\n\n    const navigate = useNavigate();\n    const API = useMemo(\n        () => process.env.REACT_APP_API_URL || \"http://localhost:8080\",\n        []\n    );\n\n    // reguły\n    const MIN_MIN = 30;\n    const MAX_MIN = 300;\n    const OPENING_HOUR = 12;\n    const LAST_SELECTABLE_HOUR = 21; // 22 wykluczone\n    const pad = (n) => (n < 10 ? \"0\" + n : \"\" + n);\n\n    const todayDateStr = useMemo(() => {\n        const d = new Date();\n        return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n    }, []);\n\n    const toIsoWithSeconds = (date) =>\n        `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(\n            date.getDate()\n        )}T${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(\n            date.getSeconds()\n        )}`;\n\n    const startTimePart = `${pad(Number(hour))}:${pad(Number(minute))}`;\n    const buildStartDate = (date, hh, mm) =>\n        date ? new Date(`${date}T${pad(Number(hh))}:${pad(Number(mm))}:00`) : null;\n\n    const startDateObj = buildStartDate(startDatePart, hour, minute);\n\n    const maxMinutesForStart = (start) => {\n        if (!start) return MAX_MIN;\n        const latestEnd = new Date(start);\n        latestEnd.setHours(22, 0, 0, 0);\n        const diffMin = Math.floor((latestEnd - start) / 60000);\n        if (diffMin <= 0) return 0;\n        return Math.min(MAX_MIN, diffMin);\n    };\n\n    const maxAllowedForHint = maxMinutesForStart(startDateObj);\n    const endPreview =\n        startDateObj && minutes\n            ? new Date(startDateObj.getTime() + minutes * 60000)\n            : null;\n\n    // domyślny start (dziś, zaokrąglenie do 00/30; <12 → 12:00; >21:30 → jutro 12:00)\n    useEffect(() => {\n        const now = new Date();\n        const todayStr = `${now.getFullYear()}-${pad(now.getMonth() + 1)}-${pad(\n            now.getDate()\n        )}`;\n        if (!startDatePart) setStartDatePart(todayStr);\n\n        let h = now.getHours();\n        let m = now.getMinutes() < 30 ? 30 : 0;\n        if (m === 0 && now.getMinutes() >= 30) h++;\n\n        if (h < OPENING_HOUR) {\n            h = OPENING_HOUR;\n            m = 0;\n        } else if (h > LAST_SELECTABLE_HOUR || (h === LAST_SELECTABLE_HOUR && m > 30)) {\n            const t = new Date(now);\n            t.setDate(now.getDate() + 1);\n            const nextStr = `${t.getFullYear()}-${pad(t.getMonth() + 1)}-${pad(\n                t.getDate()\n            )}`;\n            setStartDatePart(nextStr);\n            h = OPENING_HOUR;\n            m = 0;\n        }\n\n        setHour(String(h));\n        setMinute(pad(m));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    // — ograniczenie zapytań: debounce + abort + pamięć ostatniego klucza\n    const lastQueryRef = useRef(\"\");\n    useEffect(() => {\n        setFormError(\"\");\n\n        if (!startDateObj || !minutes) {\n            setAvailableTables([]);\n            return;\n        }\n        const h = startDateObj.getHours();\n        const mm = startDateObj.getMinutes();\n        if (h < OPENING_HOUR || h > LAST_SELECTABLE_HOUR || (h === LAST_SELECTABLE_HOUR && mm > 30)) {\n            setAvailableTables([]);\n            return;\n        }\n        const maxAllowed = maxMinutesForStart(startDateObj);\n        if (maxAllowed < MIN_MIN) {\n            setAvailableTables([]);\n            return;\n        }\n\n        const startISO = toIsoWithSeconds(startDateObj);\n        const key = `${startISO}|${minutes}`;\n        if (key === lastQueryRef.current) return;\n\n        const ctrl = new AbortController();\n        const t = setTimeout(async () => {\n            try {\n                const res = await fetch(\n                    `${API}/api/reservations/available?start=${encodeURIComponent(\n                        startISO\n                    )}&minutes=${minutes}`,\n                    { credentials: \"include\", signal: ctrl.signal }\n                );\n                if (!res.ok) throw new Error(\"Fehler beim Laden der verfügbaren Tische.\");\n                const data = await res.json();\n                setAvailableTables(Array.isArray(data) ? data : []);\n                lastQueryRef.current = key;\n            } catch (e) {\n                if (e.name !== \"AbortError\") {\n                    console.error(e);\n                    setAvailableTables([]);\n                }\n            }\n        }, 300);\n\n        return () => {\n            clearTimeout(t);\n            ctrl.abort();\n        };\n    }, [API, minutes, startDateObj]);\n\n    // reset stolika jeśli zniknął\n    useEffect(() => {\n        if (!tableNumber) return;\n        const stillAvail = availableTables.some(\n            (t) => String(t.tableNumber) === String(tableNumber)\n        );\n        if (!stillAvail) setTableNumber(\"\");\n    }, [availableTables, tableNumber]);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setFormError(\"\");\n\n        if (!startDateObj) return setFormError(\"Bitte Startzeit auswählen.\");\n\n        const h = startDateObj.getHours();\n        const mm = startDateObj.getMinutes();\n        if (\n            h < OPENING_HOUR ||\n            h > LAST_SELECTABLE_HOUR ||\n            (h === LAST_SELECTABLE_HOUR && mm > 30)\n        ) {\n            return setFormError(\n                \"Reservierungen sind nur zwischen 12:00 und 21:30 (Ende bis 22:00) möglich.\"\n            );\n        }\n\n        if (startDateObj < new Date()) {\n            return setFormError(\"Reservierungen in der Vergangenheit sind nicht möglich.\");\n        }\n\n        if (!minutes || minutes < MIN_MIN || minutes > MAX_MIN) {\n            return setFormError(\"Die Dauer muss zwischen 30 und 300 Minuten liegen.\");\n        }\n\n        const maxAllowed = maxMinutesForStart(startDateObj);\n        if (minutes > maxAllowed) {\n            if (maxAllowed < MIN_MIN) {\n                return setFormError(\n                    \"Die letzte Reservierung muss spätestens um 22:00 Uhr enden. Bitte frühere Zeit wählen.\"\n                );\n            }\n            return setFormError(\n                `Für diese Startzeit ist maximal ${maxAllowed} Minuten erlaubt (bis 22:00 Uhr).`\n            );\n        }\n\n        if (!tableNumber) return setFormError(\"Bitte Tisch auswählen.\");\n\n        const end = new Date(startDateObj.getTime() + minutes * 60000);\n\n        const payload = {\n            tableNumber: Number(tableNumber),\n            startTime: toIsoWithSeconds(startDateObj),\n            endTime: toIsoWithSeconds(end),\n        };\n\n        try {\n            const resp = await fetch(`${API}/api/reservations`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                credentials: \"include\",\n                body: JSON.stringify(payload),\n            });\n            const txt = await resp.text();\n            if (!resp.ok) throw new Error(txt || \"Reservierung fehlgeschlagen.\");\n\n            const data = txt ? JSON.parse(txt) : null;\n            setReservation([data]);\n            navigate(\"/reservations/my\");\n        } catch (err) {\n            console.error(err);\n            setFormError(`Reservierung fehlgeschlagen: ${err.message}`);\n        }\n    };\n\n    return (\n        <div className=\"newreservation-page\">\n            <div className=\"newreservation-container\">\n                <div className=\"newreservation-header\">\n                    <h1>Neue Reservierung</h1>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"reservation-form\" noValidate>\n                    {/* Data */}\n                    <label htmlFor=\"startDate\" style={{ display: \"block\", marginBottom: 4 }}>\n                        Datum\n                    </label>\n                    <input\n                        id=\"startDate\"\n                        type=\"date\"\n                        value={startDatePart}\n                        min={todayDateStr}\n                        onChange={(e) => {\n                            setStartDatePart(e.target.value);\n                            setFormError(\"\");\n                            lastQueryRef.current = \"\";\n                        }}\n                        required\n                    />\n\n                    {/* Godzina + Minuty (00/30) */}\n                    <label style={{ display: \"block\", margin: \"12px 0 4px\" }}>Uhrzeit</label>\n                    <div style={{ display: \"flex\", gap: 8 }}>\n                        <select\n                            id=\"hour\"\n                            value={hour}\n                            onChange={(e) => {\n                                setHour(e.target.value);\n                                setFormError(\"\");\n                                lastQueryRef.current = \"\";\n                            }}\n                            aria-label=\"Stunde\"\n                        >\n                            {Array.from(\n                                { length: LAST_SELECTABLE_HOUR - OPENING_HOUR + 1 },\n                                (_, i) => OPENING_HOUR + i\n                            ).map((h) => (\n                                <option key={h} value={String(h)}>\n                                    {pad(h)}\n                                </option>\n                            ))}\n                        </select>\n\n                        <select\n                            id=\"minute\"\n                            value={minute}\n                            onChange={(e) => {\n                                setMinute(e.target.value);\n                                setFormError(\"\");\n                                lastQueryRef.current = \"\";\n                            }}\n                            aria-label=\"Minute\"\n                        >\n                            <option value=\"00\">00</option>\n                            <option value=\"30\">30</option>\n                        </select>\n                    </div>\n                    <small style={{ display: \"block\", marginTop: 4, color: \"#555\" }}>\n                        Start nur von <strong>12:00</strong> bis <strong>21:30</strong> (Ende spätestens 22:00).\n                    </small>\n\n                    {/* Hidden #startTime – dla Cypressa */}\n                    <input\n                        id=\"startTime\"\n                        type=\"hidden\"\n                        value={startDatePart ? `${startDatePart}T${startTimePart}` : \"\"}\n                        readOnly\n                    />\n\n                    {/* Dauer */}\n                    <label htmlFor=\"duration\" style={{ display: \"block\", margin: \"12px 0 4px\" }}>\n                        Dauer\n                    </label>\n                    <select\n                        id=\"duration\"\n                        value={minutes}\n                        onChange={(e) => {\n                            setMinutes(Number(e.target.value));\n                            setFormError(\"\");\n                            lastQueryRef.current = \"\";\n                        }}\n                        required\n                    >\n                        {Array.from({ length: (MAX_MIN - MIN_MIN) / 30 + 1 }, (_, i) => {\n                            const m = MIN_MIN + i * 30;\n                            const disabled = !!startDateObj && m > maxMinutesForStart(startDateObj);\n                            const label =\n                                m < 60\n                                    ? `${m} Min`\n                                    : `${Math.floor(m / 60)} Std${m % 60 ? ` ${m % 60} Min` : \"\"}`;\n                            return (\n                                <option key={m} value={m} disabled={disabled}>\n                                    {label}\n                                    {disabled ? \" (bis 22:00 Uhr)\" : \"\"}\n                                </option>\n                            );\n                        })}\n                    </select>\n\n                    {/* Tische */}\n                    <label htmlFor=\"tableNumber\" style={{ display: \"block\", margin: \"12px 0 4px\" }}>\n                        Tisch\n                    </label>\n                    <select\n                        id=\"tableNumber\"\n                        value={tableNumber}\n                        onChange={(e) => setTableNumber(e.target.value)}\n                        required\n                        disabled={maxAllowedForHint < MIN_MIN}\n                    >\n                        <option value=\"\">Tisch auswählen…</option>\n                        {availableTables.map((t) => (\n                            <option key={t.id} value={t.tableNumber}>\n                                Tisch {t.tableNumber} ({t.numberOfSeats} Pers.)\n                            </option>\n                        ))}\n                    </select>\n\n                    {/* Podgląd końca */}\n                    {endPreview && (\n                        <small style={{ display: \"block\", marginTop: 6, color: \"#555\" }}>\n                            Ende:{\" \"}\n                            {endPreview.toLocaleTimeString(\"de-DE\", {\n                                hour: \"2-digit\",\n                                minute: \"2-digit\",\n                            })}{\" \"}\n                            (spätestens 22:00 Uhr)\n                        </small>\n                    )}\n\n                    {/* Błędy */}\n                    {formError && (\n                        <p data-cy=\"form-error\" style={{ color: \"#c62828\", marginTop: 10 }}>\n                            {formError}\n                        </p>\n                    )}\n\n                    <button type=\"submit\" disabled={maxAllowedForHint < MIN_MIN}>\n                        Reservieren\n                    </button>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default ReservationForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}