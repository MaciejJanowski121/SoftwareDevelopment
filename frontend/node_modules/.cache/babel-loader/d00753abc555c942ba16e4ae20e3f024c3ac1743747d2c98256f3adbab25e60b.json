{"ast":null,"code":"var _jsxFileName = \"/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ChangePassword.jsx\",\n  _s = $RefreshSig$();\nimport { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport \"../styles/changepassword.css\";\n\n/**\n * Komponente zum Ändern des Benutzerpassworts.\n *\n * <p>Diese React-Komponente bietet ein Formular zur Änderung des Passworts\n * des aktuell eingeloggten Benutzers. Sie sendet eine Anfrage an den\n * Spring-Boot-Endpunkt <code>/user/change-password</code> und verwendet dabei\n * das JWT-Cookie für die Authentifizierung.</p>\n *\n * <ul>\n *   <li>Validiert Eingaben lokal (z. B. Mindestlänge des neuen Passworts).</li>\n *   <li>Zeigt Fehlermeldungen direkt im Formular an (ProblemDetail-Unterstützung).</li>\n *   <li>Leitet nach erfolgreicher Änderung zur Konto-Seite weiter.</li>\n * </ul>\n *\n * @component\n * @returns {JSX.Element} Password-Change-Formular.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChangePassword() {\n  _s();\n  const navigate = useNavigate();\n\n  /** Zustand: altes Passwort */\n  const [oldPassword, setOldPassword] = useState(\"\");\n  /** Zustand: neues Passwort */\n  const [newPassword, setNewPassword] = useState(\"\");\n  /** Zustand: Fehlermeldung */\n  const [error, setError] = useState(\"\");\n  /** Zustand: Loading-Indikator */\n  const [isLoading, setIsLoading] = useState(false);\n\n  /**\n   * Sendet die Passwortänderung an das Backend.\n   *\n   * @async\n   * @param {Event} e Submit-Event des Formulars\n   */\n  const handlePasswordChange = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setIsLoading(true);\n    try {\n      const response = await fetch(\"http://localhost:8080/user/change-password\", {\n        method: \"PUT\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          oldPassword,\n          newPassword\n        })\n      });\n      if (response.ok) {\n        navigate(\"/myaccount\");\n        return;\n      }\n      let message = \"Ein Fehler ist aufgetreten.\";\n      const ct = response.headers.get(\"content-type\") || \"\";\n      if (ct.includes(\"application/problem+json\") || ct.includes(\"application/json\")) {\n        try {\n          const problem = await response.json();\n          message = (problem === null || problem === void 0 ? void 0 : problem.detail) || (problem === null || problem === void 0 ? void 0 : problem.title) || message;\n        } catch {\n          message = await response.text().catch(() => message);\n        }\n      } else {\n        message = await response.text().catch(() => message);\n      }\n      setError(message);\n    } catch {\n      setError(\"Netzwerk- oder Serverfehler.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"password-change-container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"password-change-form\",\n      onSubmit: handlePasswordChange,\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => navigate(\"/myaccount\"),\n        className: \"back-button\",\n        children: \"\\u2190 Zur\\xFCck\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"oldPassword\",\n        children: \"Old Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"oldPassword\",\n        type: \"password\",\n        placeholder: \"Enter old password\",\n        autoComplete: \"current-password\",\n        onChange: e => setOldPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"newPassword\",\n        children: \"New Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"newPassword\",\n        type: \"password\",\n        placeholder: \"Enter new password\",\n        autoComplete: \"new-password\",\n        onChange: e => setNewPassword(e.target.value),\n        required: true,\n        minLength: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        \"aria-live\": \"assertive\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"password-change\",\n        disabled: isLoading,\n        children: isLoading ? \"Processing...\" : \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(ChangePassword, \"C5XIt6NNe13NGoIDBv1PRMef+4U=\", false, function () {\n  return [useNavigate];\n});\n_c = ChangePassword;\nexport default ChangePassword;\nvar _c;\n$RefreshReg$(_c, \"ChangePassword\");","map":{"version":3,"names":["useNavigate","useState","jsxDEV","_jsxDEV","ChangePassword","_s","navigate","oldPassword","setOldPassword","newPassword","setNewPassword","error","setError","isLoading","setIsLoading","handlePasswordChange","e","preventDefault","response","fetch","method","credentials","headers","body","JSON","stringify","ok","message","ct","get","includes","problem","json","detail","title","text","catch","className","children","onSubmit","noValidate","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","placeholder","autoComplete","onChange","target","value","required","minLength","disabled","_c","$RefreshReg$"],"sources":["/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ChangePassword.jsx"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport \"../styles/changepassword.css\";\n\n/**\n * Komponente zum Ändern des Benutzerpassworts.\n *\n * <p>Diese React-Komponente bietet ein Formular zur Änderung des Passworts\n * des aktuell eingeloggten Benutzers. Sie sendet eine Anfrage an den\n * Spring-Boot-Endpunkt <code>/user/change-password</code> und verwendet dabei\n * das JWT-Cookie für die Authentifizierung.</p>\n *\n * <ul>\n *   <li>Validiert Eingaben lokal (z. B. Mindestlänge des neuen Passworts).</li>\n *   <li>Zeigt Fehlermeldungen direkt im Formular an (ProblemDetail-Unterstützung).</li>\n *   <li>Leitet nach erfolgreicher Änderung zur Konto-Seite weiter.</li>\n * </ul>\n *\n * @component\n * @returns {JSX.Element} Password-Change-Formular.\n */\nfunction ChangePassword() {\n    const navigate = useNavigate();\n\n    /** Zustand: altes Passwort */\n    const [oldPassword, setOldPassword] = useState(\"\");\n    /** Zustand: neues Passwort */\n    const [newPassword, setNewPassword] = useState(\"\");\n    /** Zustand: Fehlermeldung */\n    const [error, setError] = useState(\"\");\n    /** Zustand: Loading-Indikator */\n    const [isLoading, setIsLoading] = useState(false);\n\n    /**\n     * Sendet die Passwortänderung an das Backend.\n     *\n     * @async\n     * @param {Event} e Submit-Event des Formulars\n     */\n    const handlePasswordChange = async (e) => {\n        e.preventDefault();\n        setError(\"\");\n        setIsLoading(true);\n\n        try {\n            const response = await fetch(\"http://localhost:8080/user/change-password\", {\n                method: \"PUT\",\n                credentials: \"include\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ oldPassword, newPassword }),\n            });\n\n            if (response.ok) {\n                navigate(\"/myaccount\");\n                return;\n            }\n\n            let message = \"Ein Fehler ist aufgetreten.\";\n            const ct = response.headers.get(\"content-type\") || \"\";\n            if (ct.includes(\"application/problem+json\") || ct.includes(\"application/json\")) {\n                try {\n                    const problem = await response.json();\n                    message = problem?.detail || problem?.title || message;\n                } catch {\n                    message = await response.text().catch(() => message);\n                }\n            } else {\n                message = await response.text().catch(() => message);\n            }\n            setError(message);\n        } catch {\n            setError(\"Netzwerk- oder Serverfehler.\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"password-change-container\">\n            <form className=\"password-change-form\" onSubmit={handlePasswordChange} noValidate>\n                <button\n                    type=\"button\"\n                    onClick={() => navigate(\"/myaccount\")}\n                    className=\"back-button\"\n                >\n                    ← Zurück\n                </button>\n\n                <h1>Change Password</h1>\n\n                <label htmlFor=\"oldPassword\">Old Password</label>\n                <input\n                    id=\"oldPassword\"\n                    type=\"password\"\n                    placeholder=\"Enter old password\"\n                    autoComplete=\"current-password\"\n                    onChange={(e) => setOldPassword(e.target.value)}\n                    required\n                />\n\n                <label htmlFor=\"newPassword\">New Password</label>\n                <input\n                    id=\"newPassword\"\n                    type=\"password\"\n                    placeholder=\"Enter new password\"\n                    autoComplete=\"new-password\"\n                    onChange={(e) => setNewPassword(e.target.value)}\n                    required\n                    minLength={6}\n                />\n\n                {error && (\n                    <p className=\"error-message\" aria-live=\"assertive\">\n                        {error}\n                    </p>\n                )}\n\n                <button type=\"submit\" className=\"password-change\" disabled={isLoading}>\n                    {isLoading ? \"Processing...\" : \"Change Password\"}\n                </button>\n            </form>\n        </div>\n    );\n}\n\nexport default ChangePassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}