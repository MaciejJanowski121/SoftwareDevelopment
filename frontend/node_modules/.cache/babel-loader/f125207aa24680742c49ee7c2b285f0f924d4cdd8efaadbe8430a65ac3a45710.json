{"ast":null,"code":"var _jsxFileName = \"/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/IstLoggedCheck.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\n\n/** Basis-URL des Backends (kann über ENV-Variable gesetzt werden). */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API = \"http://localhost:8080\";\n\n/**\n * Wrapper-Komponente zur Prüfung, ob der Benutzer bereits eingeloggt ist.\n *\n * <p>Verhindert den Zugriff auf Seiten wie Login/Register, wenn bereits eine\n * gültige Session besteht, und leitet in diesem Fall nach <code>/myaccount</code>\n * weiter. Andernfalls werden die übergebenen Kinder gerendert.</p>\n *\n * <ul>\n *   <li>Fragt <code>/auth/auth_check</code> mit <code>credentials: \"include\"</code> ab.</li>\n *   <li>Zeigt während der Prüfung eine Ladeanzeige.</li>\n *   <li>Verwendet einen <em>AbortController</em>, um Race Conditions zu vermeiden.</li>\n * </ul>\n *\n * @component\n * @param {{ children: JSX.Element }} props\n * @returns {JSX.Element}\n */\nexport default function IsLoggedCheck({\n  children\n}) {\n  _s();\n  /** Zustand: ob der Benutzer bereits eingeloggt ist. */\n  const [isLogged, setIsLogged] = useState(false);\n  /** Zustand: ob gerade die Prüfung läuft. */\n  const [isLoading, setIsLoading] = useState(true);\n\n  /**\n   * Asynchrone Prüfung der Benutzer-Authentifizierung.\n   *\n   * <p>Ruft den Endpunkt <code>/auth/auth_check</code> auf und setzt\n   * den lokalen Zustand abhängig vom Ergebnis.</p>\n   *\n   * @param {AbortSignal} signal\n   * @returns {Promise<void>}\n   */\n  const checkAuth = async signal => {\n    try {\n      const res = await fetch(`${API}/auth/auth_check`, {\n        method: \"GET\",\n        credentials: \"include\",\n        signal\n      });\n      setIsLogged(res.ok);\n    } catch {\n      setIsLogged(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    const ctrl = new AbortController();\n    checkAuth(ctrl.signal);\n    return () => ctrl.abort();\n  }, []);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      \"aria-live\": \"polite\",\n      children: \"\\xDCberpr\\xFCfung der Anmeldung\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 16\n    }, this);\n  }\n  if (isLogged) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/myaccount\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 16\n    }, this);\n  }\n  return children;\n}\n_s(IsLoggedCheck, \"kxemtJDZdM6BY2lsBaJGCg5Wsps=\");\n_c = IsLoggedCheck;\nvar _c;\n$RefreshReg$(_c, \"IsLoggedCheck\");","map":{"version":3,"names":["useEffect","useState","Navigate","jsxDEV","_jsxDEV","API","IsLoggedCheck","children","_s","isLogged","setIsLogged","isLoading","setIsLoading","checkAuth","signal","res","fetch","method","credentials","ok","ctrl","AbortController","abort","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","_c","$RefreshReg$"],"sources":["/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/IstLoggedCheck.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\n\n/** Basis-URL des Backends (kann über ENV-Variable gesetzt werden). */\nconst API = \"http://localhost:8080\";\n\n/**\n * Wrapper-Komponente zur Prüfung, ob der Benutzer bereits eingeloggt ist.\n *\n * <p>Verhindert den Zugriff auf Seiten wie Login/Register, wenn bereits eine\n * gültige Session besteht, und leitet in diesem Fall nach <code>/myaccount</code>\n * weiter. Andernfalls werden die übergebenen Kinder gerendert.</p>\n *\n * <ul>\n *   <li>Fragt <code>/auth/auth_check</code> mit <code>credentials: \"include\"</code> ab.</li>\n *   <li>Zeigt während der Prüfung eine Ladeanzeige.</li>\n *   <li>Verwendet einen <em>AbortController</em>, um Race Conditions zu vermeiden.</li>\n * </ul>\n *\n * @component\n * @param {{ children: JSX.Element }} props\n * @returns {JSX.Element}\n */\nexport default function IsLoggedCheck({ children }) {\n    /** Zustand: ob der Benutzer bereits eingeloggt ist. */\n    const [isLogged, setIsLogged] = useState(false);\n    /** Zustand: ob gerade die Prüfung läuft. */\n    const [isLoading, setIsLoading] = useState(true);\n\n    /**\n     * Asynchrone Prüfung der Benutzer-Authentifizierung.\n     *\n     * <p>Ruft den Endpunkt <code>/auth/auth_check</code> auf und setzt\n     * den lokalen Zustand abhängig vom Ergebnis.</p>\n     *\n     * @param {AbortSignal} signal\n     * @returns {Promise<void>}\n     */\n    const checkAuth = async (signal) => {\n        try {\n            const res = await fetch(`${API}/auth/auth_check`, {\n                method: \"GET\",\n                credentials: \"include\",\n                signal,\n            });\n            setIsLogged(res.ok);\n        } catch {\n            setIsLogged(false);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        const ctrl = new AbortController();\n        checkAuth(ctrl.signal);\n        return () => ctrl.abort();\n    }, []);\n\n    if (isLoading) {\n        return <p aria-live=\"polite\">Überprüfung der Anmeldung…</p>;\n    }\n\n    if (isLogged) {\n        return <Navigate to=\"/myaccount\" replace />;\n    }\n\n    return children;\n}"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,QAAQ,QAAQ,kBAAkB;;AAE3C;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,GAAG,GAAG,uBAAuB;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,aAAaA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAChD;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAC/C;EACA,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;;EAEhD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,MAAMY,SAAS,GAAG,MAAOC,MAAM,IAAK;IAChC,IAAI;MACA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGX,GAAG,kBAAkB,EAAE;QAC9CY,MAAM,EAAE,KAAK;QACbC,WAAW,EAAE,SAAS;QACtBJ;MACJ,CAAC,CAAC;MACFJ,WAAW,CAACK,GAAG,CAACI,EAAE,CAAC;IACvB,CAAC,CAAC,MAAM;MACJT,WAAW,CAAC,KAAK,CAAC;IACtB,CAAC,SAAS;MACNE,YAAY,CAAC,KAAK,CAAC;IACvB;EACJ,CAAC;EAEDZ,SAAS,CAAC,MAAM;IACZ,MAAMoB,IAAI,GAAG,IAAIC,eAAe,CAAC,CAAC;IAClCR,SAAS,CAACO,IAAI,CAACN,MAAM,CAAC;IACtB,OAAO,MAAMM,IAAI,CAACE,KAAK,CAAC,CAAC;EAC7B,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIX,SAAS,EAAE;IACX,oBAAOP,OAAA;MAAG,aAAU,QAAQ;MAAAG,QAAA,EAAC;IAA0B;MAAAgB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAC/D;EAEA,IAAIjB,QAAQ,EAAE;IACV,oBAAOL,OAAA,CAACF,QAAQ;MAACyB,EAAE,EAAC,YAAY;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/C;EAEA,OAAOnB,QAAQ;AACnB;AAACC,EAAA,CA7CuBF,aAAa;AAAAuB,EAAA,GAAbvB,aAAa;AAAA,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}