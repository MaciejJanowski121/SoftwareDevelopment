{"ast":null,"code":"describe('Reservation Form Tests', () => {\n  const pad = n => n < 10 ? `0${n}` : `${n}`;\n  const createFutureDate = daysFromToday => {\n    const date = new Date(Date.now() + daysFromToday * 24 * 60 * 60 * 1000); // Future date\n    return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}`;\n  };\n  beforeEach(() => {\n    // Mock API responses\n    cy.intercept('GET', '**/auth/auth_check', {\n      statusCode: 200,\n      body: {\n        username: 'test_user',\n        role: 'ROLE_USER'\n      }\n    }).as('authCheck');\n    cy.intercept('GET', '**/api/reservations/available*', {\n      statusCode: 200,\n      body: [{\n        id: 1,\n        tableNumber: 3,\n        numberOfSeats: 4\n      }]\n    }).as('availableTables');\n  });\n  it('successfully creates a reservation', () => {\n    // Intercept reservation creation\n    cy.intercept('POST', '**/api/reservations', {\n      statusCode: 201,\n      body: {\n        id: 99,\n        tableNumber: 3,\n        startTime: '2025-11-09T12:00:00',\n        endTime: '2025-11-09T14:00:00'\n      }\n    }).as('createReservation');\n    cy.visit('http://localhost:3000/reservations/new');\n    cy.wait('@authCheck');\n\n    // Select a valid date\n    const futureDate = createFutureDate(1); // Tomorrow's date\n    cy.get('input#startDate').clear().type(futureDate);\n\n    // Select valid reservation time\n    cy.get('select').eq(0).should('exist').select('12'); // First <select> for hours\n    cy.get('select').eq(1).should('exist').select('30'); // Second <select> for minutes\n\n    // Select reservation duration\n    cy.get('select#duration').should('exist').select('120'); // Duration dropdown\n\n    // Select an available table\n    cy.wait('@availableTables'); // Ensure tables are available\n    cy.get('select#tableNumber').should('exist').select('3'); // Table number 3\n\n    // Submit the reservation form\n    cy.get('button[type=\"submit\"]').should('not.be.disabled').click();\n\n    // Assert user is redirected to reservations page\n    cy.wait('@createReservation');\n    cy.location('pathname').should('eq', '/reservations/my');\n  });\n  it('handles conflict when table is already reserved', () => {\n    cy.intercept('POST', '**/api/reservations', {\n      statusCode: 409,\n      body: {\n        type: 'table-already-reserved',\n        detail: 'Tisch ist bereits reserviert.'\n      }\n    }).as('createConflictReservation');\n    cy.visit('http://localhost:3000/reservations/new');\n    cy.wait('@authCheck');\n\n    // Select a valid date and time\n    const futureDate = createFutureDate(1); // Tomorrow's date\n    cy.get('input#startDate').clear().type(futureDate);\n    cy.get('select').eq(0).should('exist').select('12'); // Hours select\n    cy.get('select').eq(1).should('exist').select('00'); // Minutes select\n    cy.get('select#duration').should('exist').select('120'); // Duration dropdown\n\n    // Select an available table\n    cy.get('select#tableNumber').should('exist').select('3'); // Select Table 3\n\n    // Attempt to submit reservation\n    cy.get('button[type=\"submit\"]').click();\n    cy.wait('@createConflictReservation');\n\n    // Assert error is shown to user\n    cy.get('[data-cy=\"form-error\"]').should('be.visible').and('contain', 'Tisch ist bereits reserviert.');\n  });\n  it('validates input to prevent past dates', () => {\n    cy.visit('http://localhost:3000/reservations/new');\n    cy.wait('@authCheck');\n\n    // Enter a past date\n    const pastDate = '2025-01-01'; // Example of a date in the past\n    cy.get('input#startDate').clear().type(pastDate);\n\n    // Try submitting the form\n    cy.get('button[type=\"submit\"]').click();\n\n    // Assert error message\n    cy.get('[data-cy=\"form-error\"]').should('be.visible').and('contain', 'Bitte Startzeit auswählen.');\n  });\n});","map":{"version":3,"names":["describe","pad","n","createFutureDate","daysFromToday","date","Date","now","getFullYear","getMonth","getDate","beforeEach","cy","intercept","statusCode","body","username","role","as","id","tableNumber","numberOfSeats","it","startTime","endTime","visit","wait","futureDate","get","clear","type","eq","should","select","click","location","detail","and","pastDate"],"sources":["/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ReservationForm.jsx"],"sourcesContent":["describe('Reservation Form Tests', () => {\n    const pad = (n) => (n < 10 ? `0${n}` : `${n}`);\n    const createFutureDate = (daysFromToday) => {\n        const date = new Date(Date.now() + daysFromToday * 24 * 60 * 60 * 1000); // Future date\n        return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}`;\n    };\n\n    beforeEach(() => {\n        // Mock API responses\n        cy.intercept('GET', '**/auth/auth_check', {\n            statusCode: 200,\n            body: {\n                username: 'test_user',\n                role: 'ROLE_USER',\n            },\n        }).as('authCheck');\n\n        cy.intercept('GET', '**/api/reservations/available*', {\n            statusCode: 200,\n            body: [{ id: 1, tableNumber: 3, numberOfSeats: 4 }],\n        }).as('availableTables');\n    });\n\n    it('successfully creates a reservation', () => {\n        // Intercept reservation creation\n        cy.intercept('POST', '**/api/reservations', {\n            statusCode: 201,\n            body: {\n                id: 99,\n                tableNumber: 3,\n                startTime: '2025-11-09T12:00:00',\n                endTime: '2025-11-09T14:00:00',\n            },\n        }).as('createReservation');\n\n        cy.visit('http://localhost:3000/reservations/new');\n        cy.wait('@authCheck');\n\n        // Select a valid date\n        const futureDate = createFutureDate(1); // Tomorrow's date\n        cy.get('input#startDate').clear().type(futureDate);\n\n        // Select valid reservation time\n        cy.get('select').eq(0).should('exist').select('12'); // First <select> for hours\n        cy.get('select').eq(1).should('exist').select('30'); // Second <select> for minutes\n\n        // Select reservation duration\n        cy.get('select#duration').should('exist').select('120'); // Duration dropdown\n\n        // Select an available table\n        cy.wait('@availableTables'); // Ensure tables are available\n        cy.get('select#tableNumber').should('exist').select('3'); // Table number 3\n\n        // Submit the reservation form\n        cy.get('button[type=\"submit\"]').should('not.be.disabled').click();\n\n        // Assert user is redirected to reservations page\n        cy.wait('@createReservation');\n        cy.location('pathname').should('eq', '/reservations/my');\n    });\n\n    it('handles conflict when table is already reserved', () => {\n        cy.intercept('POST', '**/api/reservations', {\n            statusCode: 409,\n            body: {\n                type: 'table-already-reserved',\n                detail: 'Tisch ist bereits reserviert.',\n            },\n        }).as('createConflictReservation');\n\n        cy.visit('http://localhost:3000/reservations/new');\n        cy.wait('@authCheck');\n\n        // Select a valid date and time\n        const futureDate = createFutureDate(1); // Tomorrow's date\n        cy.get('input#startDate').clear().type(futureDate);\n\n        cy.get('select').eq(0).should('exist').select('12'); // Hours select\n        cy.get('select').eq(1).should('exist').select('00'); // Minutes select\n        cy.get('select#duration').should('exist').select('120'); // Duration dropdown\n\n        // Select an available table\n        cy.get('select#tableNumber').should('exist').select('3'); // Select Table 3\n\n        // Attempt to submit reservation\n        cy.get('button[type=\"submit\"]').click();\n        cy.wait('@createConflictReservation');\n\n        // Assert error is shown to user\n        cy.get('[data-cy=\"form-error\"]')\n            .should('be.visible')\n            .and('contain', 'Tisch ist bereits reserviert.');\n    });\n\n    it('validates input to prevent past dates', () => {\n        cy.visit('http://localhost:3000/reservations/new');\n        cy.wait('@authCheck');\n\n        // Enter a past date\n        const pastDate = '2025-01-01'; // Example of a date in the past\n        cy.get('input#startDate')\n            .clear()\n            .type(pastDate);\n\n        // Try submitting the form\n        cy.get('button[type=\"submit\"]').click();\n\n        // Assert error message\n        cy.get('[data-cy=\"form-error\"]')\n            .should('be.visible')\n            .and('contain', 'Bitte Startzeit auswählen.');\n    });\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}